@model ScoreViewModel

@{
    ViewData["Title"] = "Card Score Calculator";
}
<div class="text-center py-5 bg-light rounded-3 mb-4 shadow-sm">
    <h1 class="display-5 fw-bold text-primary">Card Game Score Calculator</h1>
    <p class="lead text-muted">Determine the score based on card value, suit multipliers, and Joker rules.</p>
</div>

<div class="row justify-content-center">
    <div class="col-lg-7 col-md-9">

        <div class="card shadow-lg border-0">
            <div class="card-body p-4 p-md-5">

                <form asp-controller="Home" asp-action="Index" method="post" >

                    <div class="form-group mb-4">
                        <label asp-for="CardsInput" class="form-label fw-semibold">Enter Cards (comma separated)</label>

                        <div class="input-group">
                            <span class="input-group-text bg-light-subtle"><i class="bi bi-suit-spade"></i></span>
                            <input asp-for="CardsInput"
                                   id="CardsInputId" 
                                   class="form-control form-control-lg text-uppercase" 
                                   placeholder="e.g., AS,KH,2D,JR"
                                   required />
                        </div>

                        <div class="form-text text-muted small mt-2">
                            Format: 2-9, T(10), J(Jack), Q(Queen), K(King), A(Ace) followed by
                            C(Clubs), D(Diamonds), H(Hearts), S(Spades). Use JR for Joker.
                        </div>
                        <span asp-validation-for="CardsInput" class="text-danger"></span>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg shadow-sm">
                            <i class="bi bi-calculator me-2"></i> Calculate Score
                        </button>
                    </div>
                </form>
            </div>
        </div>

        @* Display Result Panel only if a calculation has been attempted *@
        @if (Model.HasResult)
        {
            <div class="mt-5">
                @if (Model.FinalScore != null)
                {
                    <div class="alert alert-success border-success-subtle shadow-sm p-4" role="alert">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-trophy-fill fs-2 me-3"></i>
                            <div>
                                <h4 class="alert-heading mb-1">Calculation Successful!</h4>
                                <p class="mb-0 fs-1 fw-bold">Score: @Model.FinalScore</p>
                            </div>
                        </div>
                    </div>
                }
                else if (!string.IsNullOrEmpty(Model.ErrorMessage))
                {
                    <div class="alert alert-danger border-danger-subtle shadow-sm p-4" role="alert">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-x-octagon-fill fs-2 me-3"></i>
                            <div>
                                <h4 class="alert-heading mb-1">Input Error!</h4>
                                <p class="mb-0 fw-semibold">@Model.ErrorMessage</p>
                               
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>